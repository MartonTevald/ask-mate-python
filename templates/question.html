<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>This was really hard to make</title>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static',filename='format_question_html.css') }}">
    <script src="http://code.jquery.com/jquery-1.10.2.js"></script>
    <script>
        function confirmDelete(url) {
            if (confirm("Are you sure you want to delete this?")) {
                window.open(url);
            } else {
                false;
            }
        }
    </script>
    <script>

        $(document).ready(function () {
            $("#hide_question_comments").click(function () {
                $(".question_comments").toggle(1000)
            });
        });
    </script>

    <script>

        $(document).ready(function () {
            $("#show_hide").click(function () {
                $(".add_answer").toggle(1000)
            });
        });
    </script>
    <script>

        $(document).ready(function () {
            $("#show_answers").click(function () {
                $(".answer_table").toggle(1000)
            });
        });
    </script>
</head>
<body bgcolor="#f0ffff">

<a href="/"><img id="logo" border="0" alt="T i d d e r" src="/static/on_off_logo.png" width="150" height="80"></a>

<table class="question_table">
    <tr>
        <th id="head_Columns">ID</th>
        <th id="head_Columns">Time</th>
        <th id="head_Columns">Vote</th>
        <th id="head_Columns">View Number</th>
        <th id="head_Columns">Title</th>
        <th id="head_Columns">Message</th>
        <th id="head_Columns">Image</th>
    </tr>
    <tr>
        <td>{{ question_row.id }}</td>
        <td>{{ question_row.submission_time }}</td>
        <td>{{ question_row.vote_number }}</td>
        <td>{{ question_row.view_number }}</td>
        <td id="question_message">{{ question_row.title }}</td>
        <td id="question_message">{{ question_row.message }}</td>
        <td><img src="{{ question_row.image }}" alt="no picture" width="150" height="150"></td>

    </tr>
    <tr>
        <td><a href="/question/{{ question_row.id }}/new-comment">
            <button type="submit">Add Comment</button>
        </a></td>
        <td><a href="/question/{{ question_row.id }}/edit">
            <button type="submit">Edit Question</button>
        </a></td>
        <td><a href="/question/{{ question_row.id }}/delete"
               onclick="return confirm('Are you sure you want to Remove?');">
            <button type="submit">Delete Question</button>
        </a></td>
        <td>
            <button id="hide_question_comments">Show/Hide Comments(Q)</button>
        </td>
        <td>
        </td>
        <td>
            <a type="button" onclick="window.location='/question/{{ question_row.id }}/vote-up'"><img
                    class="vote_question" border="0" alt="up"
                    src="/static/photos/vote_up.png"></a>
            <a type="button" onclick="window.location='/question/{{ question_row.id }}/vote-down'"><img
                    class="vote_question" border="0" alt="down"
                    src="/static/photos/vote_down.png"></a>
        </td>
    </tr>
</table>
<table class="question_comments">
    <td>Comments:
    </td>
    {% for comment in question_comments %}
        <tr>
            <td id="comment">
                {{ comment.message }}
            </td>
        </tr>
        <tr>
        <td id="comment_info">{{ comment.submission_time }}
            <input type="button" onclick="window.location='/question-comment/{{ comment.id }}/edit'"
                   value="Edit Q Comment">
            <input type="button" name="delete" value="Delete Q Comment"
                   onClick="confirmDelete('/question-comment/{{ comment.id }}/delete')"
            >
        </td>
        {% if comment.edited_count %}
            <td id="comment_info">Edited: {{ comment.edited_count }} time(s). Last edit was
                at: {{ q_c_time }}</td>
        {% endif %}
    {% endfor %}
    </tr>
</table>
<button id="show_answers">Show/Hide Answers</button>
{% for answer in answer_row %}
    <table class="answer_table">
        <tr>
            <th id="head_Columns">ID</th>
            <th id="head_Columns">Time</th>
            <th id="head_Columns">Vote</th>
            <th id="head_Columns">Message</th>
            <th id="head_Columns">Image</th>
        </tr>
        <tr align="center">
            <td>{{ answer.id }}</td>
            <td>{{ answer.submission_time }}</td>
            <td>{{ answer.vote_number }}</td>
            <td id="answer_message">{{ answer.message }}</td>
            <td><img src="{{ answer.image }}" alt="Image" width="150" height="150">
            <td>
        <tr>
            <td><a href="/answer/{{ answer.id }}/new-comment">
                <button type="submit">Add Comment</button>
            </a>
            <td><a href='/answer/{{ answer.id }}/delete' method="post"
                   onclick="return confirm('Are you sure you want to Remove?');">
                <button type="submit">Delete Answer</button>
            </a></td>
            <td><input type="button" onclick="window.location='/answer/{{ answer.id }}/edit'" value="Edit Answer"></td>
            <td>
                <label for="vote-up"></label>
                <a type="button" onclick="window.location='/answer/{{ answer.id }}/vote-up'"><img
                        class="vote" border="0" alt="up"
                        src="/static/photos/vote_up.png"></a>
                <label for="vote-down"></label>
                <a type="button" onclick="window.location='/answer/{{ answer.id }}/vote-down'"><img
                        class="vote" border="0" alt="down"
                        src="/static/photos/vote_down.png"></a>
            </td>
        </tr>
        {% for comment in answer_comments %}
            {% if comment.answer_id == answer.id %}
                <td id="comment">{{ comment.message }}</td>
                <tr>
                <td id="comment_info">{{ comment.submission_time }}
                <td>
                <td><input type="button" onclick="window.location='/answer-comment/{{ comment.id }}/edit'"
                           value="Edit A Comment">
                    <input type="button" name="delete" value="Delete A Comment"
                           onClick="confirmDelete('/answer-comment/{{ comment.id }}/delete')"
                    >
                </td>
                {% if comment.edited_count %}
                    <td id="comment_info">Edited: {{ comment.edited_count }} time(s). Last edit was
                        at: {{ time }}</td>
                    <br>
                {% endif %}
            {% endif %}
        </tr>
        {% endfor %}
    </table>
{% endfor %}
<br>
<button id="show_hide">Show/Hide Add Answer</button>

<table class="add_answer">
    <tr>
        <td>
            <form action="/question/{{ question_row.id }}" method="post">
                <p><label for="answer_message">Your Answer::</label><br>
                    <textarea id="answer_message" name="answer_message" rows="8" cols="50" minlength="10"></textarea>
                </p>
                <p><label for="upload_pic">Upload a picture:</label><br>
                    <input type="url" name="image" id="upload_pic">
                </p>
                <button type="submit">Add Answer</button>
            </form>
        </td>
    </tr>

</table>
</body>
</html>